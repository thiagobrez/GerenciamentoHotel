<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Hotel Control</title>
    </h:head>
    <h:body>

        <!--layout="grid"-->

        <p:dataGrid var="quarto"
                    value="#{QuartoJSFManagedBean.quartos}"
                    columns="3"
                    rows="6"
                    paginator="true"
                    id="quartos"
                    paginatorTemplate="{CurrentPageReport}
                    {FirstPageLink}
                    {PreviousPageLink}
                    {PageLinks}
                    {NextPageLink}
                    {LastPageLink}
                    {RowsPerPageDropdown}"
                    rowsPerPageTemplate="6">

            <f:facet name="header">
                Quartos cadastrados
            </f:facet>

            <p:panel header="#{quarto.numero}" style="text-align:center">
                <h:panelGrid columns="1" style="width:100%">

                    <h:outputText value="#{quarto.ocupado}" />

                    <p:commandLink update=":form:checkin"
                                   oncomplete="PF('checkinDialog').show()" title="Checkin">
                        <f:setPropertyActionListener value="#{quarto}"
                                                     target="#{EstadiaJSFManagedBean.selectedQuarto}" />
                    </p:commandLink>

                    <p:commandLink update=":form:checkout"
                                   oncomplete="PF('checkoutDialog').show()" title="Checkout">
                        <f:setPropertyActionListener value="#{quarto}"
                                                     target="#{EstadiaJSFManagedBean.selectedQuarto}" />
                    </p:commandLink>

                </h:panelGrid>
            </p:panel>
        </p:dataGrid>

        <p:dialog header="Checkin" widgetVar="checkinDialog" modal="true"
                  showEffect="fade" hideEffect="fade" resizable="false">
            <h:form>
                <p:outputPanel id="checkinPanel" style="text-align:center;">
                    <p:panelGrid  columns="2"
                                  rendered="#{not empty EstadiaJSFManagedBean.selectedQuarto}"
                                  columnClasses="label,value">

                        <h:outputText value="Nome: " />
                        <p:inputText id="nomeHospede" value="#{EstadiaJSFManagedBean.nome}" />

                        <h:outputText value="CPF: " />
                        <p:inputText id="cpfHospede" value="#{EstadiaJSFManagedBean.cpf}"/>

                        <h:outputText value="Endereco: " />
                        <p:inputText id="enderecoHospede" value="#{EstadiaJSFManagedBean.endereco}"/>

                        <h:outputText value="Telefone: " />
                        <p:inputText id="telefoneHospede" value="#{EstadiaJSFManagedBean.telefone}"/>

                        <p:commandButton value="Realizar Checkin" id="realizarCheckin"
                                         actionListener="#{EstadiaJSFManagedBean.realizarCheckin}" />

                </p:panelGrid>
            </p:outputPanel>
        </h:form>
    </p:dialog>

    <p:dialog header="Checkout" widgetVar="checkoutDialog" modal="true"
              showEffect="fade" hideEffect="fade" resizable="false">

        <p:outputPanel id="checkoutPanel" style="text-align:center;">
            <p:panelGrid  columns="1" rendered="#{not empty EstadiaJSFManagedBean.selectedQuarto}" columnClasses="label">

                <h:outputText value="Fatura a ser·fechada no valor de #{EstadiaJSFManagedBean.fatura} " />

                <p:commandButton value="Realizar Checkout" id="realizarCheckout"
                                 update="realizarCheckout" actionListener="#{EstadiaJSFManagedBean.realizarCheckout}" />

            </p:panelGrid>
        </p:outputPanel>
    </p:dialog>

    <!--
<p:dialog header="Sucesso" widgetVar="sucessCheckinDialog" modal="true"
          showEffect="fade" hideEffect="fade" resizable="false">

    <p:outputPanel id="sucessCheckinPanel" style="text-align:center;">
        <p:panelGrid  columns="1" rendered="#{not empty algumaClasse.selectedQuarto}" columnClasses="label">

            <h:outputText value="Sucesso ao realizar o checkin" />
            <h:outputText value="Sua senha para acessar o sistema é #{EstadiaJSFManagedBean.senhaCheckin}" />

        </p:panelGrid>
    </p:outputPanel>
</p:dialog>

<p:dialog header="Sucesso" widgetVar="sucessCheckoutDialog" modal="true"
          showEffect="fade" hideEffect="fade" resizable="false">

    <p:outputPanel id="sucessCheckoutPanel" style="text-align:center;">
        <p:panelGrid  columns="1" rendered="#{not empty algumaClasse.selectedQuarto}" columnClasses="label">

            <h:outputText value="Sucesso ao realizar o checkout" />

        </p:panelGrid>
    </p:outputPanel>
</p:dialog>
    -->

    <p:panel id="cadastrarQuartoPanel" header="Cadastrar Quarto" style="margin-bottom:20px">
        <h:panelGrid columns="1" cellpadding="10">
            <h:form id="formCadastrarQuarto">

                <h:outputLabel for="numero" value="Numero: " style="font-weight:bold" />
                <p:inputText id="numero" value="#{QuartoJSFManagedBean.numero}"/>

                <h:outputLabel for="diaria" value="Valor da diaria: " style="font-weight:bold" />
                <p:inputText id="diaria" value="#{QuartoJFSManagedBean.valorDiaria}" />

                <p:outputLabel for="tipo" value="Tipo de quarto:" />
                <p:selectOneMenu id="tipo" style="width:125px">
                    <f:selectItems value="#{QuartoJFSManagedBean.tipos}" />
                </p:selectOneMenu>

                <p:outputLabel for="camas" value="Camas: " />
                <p:selectOneMenu id="camas" >
                    <f:selectItems value="#{QuartoJFSManagedBean.camas}" />
                </p:selectOneMenu>

                <p:outputLabel for="adicionais" value="Adicionais: " />
                <p:selectOneMenu id="adicionais">
                    <f:selectItems value="#{QuartoJFSManagedBean.adcionais}" />
                </p:selectOneMenu>

                <p:commandButton value="Cadastrar Quarto" id="cadastrarQuarto"
                                 update="cadastrarQuarto" actionListener="#{QuartoJFSManagedBean.cadastrarQuarto}" />

            </h:form>
        </h:panelGrid>
    </p:panel>

    <p:panel id="cadastrarServicoPanel" header="Cadastrar ServiÁos" style="margin-bottom:20px">
        <h:panelGrid columns="1" cellpadding="10">

            <h:form id="formServico">

                <h:outputLabel for="nome" value="Nome do serviço: " style="font-weight:bold" />
                <p:inputText id="nome" value="#{ServicoJSFManagedBean.nome}"/>

                <h3 style="margin-top: 0">Descricao: </h3>
                <p:inputTextarea rows="10" cols="50" queryDelay="750" minQueryLength="4" value="#{servicoJSFManagedBean.descricao}"/>

                <h:outputLabel for="valor" value="Valor: " style="font-weight:bold" />
                <p:inputText id="valor" value="#{servicoJSFManagedBean.valor}"/>

                <p:commandButton value="Cadastrar Servico" id="cadastrarServico"
                                 update="cadastrarServico" actionListener="#{ServicoJSFManagedBean.cadastrarServico}" />

            </h:form>
        </h:panelGrid>
    </p:panel>

    <p:commandButton value="Sair" id="sair" update="sair" actionListener="#{comumJSFManagedBean.deslogar}" />

</h:body>
</html>

